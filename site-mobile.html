<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Clicker Mobile Bounty</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
  body {
    background-image: url('image/bounty.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    overflow-x: hidden;
    position: relative;
    transition: background-color 0.3s;
  }

  h2 {
    color: #FFD700;
    text-shadow: 2px 2px 10px black;
    font-size: 1.8em;
    margin: 15px 0;
    text-align: center;
  }

  #image {
    width: 400px;
    height: 300px;
    object-fit: contain;
    border: 2px solid #fff;
    margin-top: 20px;
    cursor: pointer;
    touch-action: none;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }

  #image:active {
    transform: scale(0.95);
    transition: transform 0.1s;
  }

  #score {
    color: white;
    font-size: 1.5em;
    margin: 10px 0;
    text-shadow: 1px 1px 5px black;
  }

  #store {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    width: 80%;
    margin-top: 10px;
  }

  .store-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    margin-bottom: 6px;
  }

  .store-left {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .store-item img {
    width: 40px;
    height: 40px;
  }

  .button-store {
    margin: 2px;
    padding: 6px 10px;
    font-weight: bold;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: linear-gradient(90deg, #007BFF, #00BFFF);
    color: white;
    font-size: 0.8em;
    width: 65%;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    transition: transform 0.2s, background 0.2s, box-shadow 0.3s;
  }

  .button-store:hover {
    transform: scale(1.05);
    background: linear-gradient(90deg, #0056b3, #1E90FF);
    box-shadow: 0 0 8px #00BFFF;
  }

  .count {
    color: #FFD700;
    font-weight: bold;
    text-shadow: 1px 1px 3px black;
    min-width: 25px;
    text-align: center;
  }

  #reset-btn {
    margin-top: auto;
    margin-bottom: 20px;
    padding: 8px 12px;
    font-weight: bold;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: linear-gradient(90deg, #FF4C4C, #FF7777);
    color: white;
    font-size: 1em;
    width: 80%;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    transition: transform 0.2s, background 0.2s, box-shadow 0.3s;
  }

  #reset-btn:hover {
    transform: scale(1.05);
    background: linear-gradient(90deg, #cc0000, #ff4c4c);
    box-shadow: 0 0 10px red;
  }

  .click-anim {
    position: absolute;
    color: #FFD700;
    font-weight: bold;
    text-shadow: 1px 1px 4px black;
    animation: floatUp 0.8s ease-out forwards;
    pointer-events: none;
    font-size: 1.2em;
  }

  @keyframes floatUp {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-40px) scale(1.3); }
  }

  @keyframes flashRed {
    0% { background-color: rgba(255,0,0,0.4); }
    100% { background-color: transparent; }
  }
</style>
</head>
<body>

<h2>Bounty Clicker Mobile</h2>
<div id="score">Click : 0</div>
<img id="image" src="image/bounty.jpg" alt="Bounty">

<!-- Boutique -->
<div id="store"></div>

<!-- Bouton Réinitialiser en bas -->
<button id="reset-btn">Réinitialiser le jeu</button>

<script>
let score = 0;
let clickValue = 1;

const basePrices = [10, 50, 200, 500, 1200, 3000, 7000, 15000, 50000];

const items = [
  {name:"Gamelle de croquette", price:10, cps:0, clickMultiplier:1, icon:'image/icon1.png', count:0},
  {name:"Paquet de croquette", price:50, cps:1, clickMultiplier:0, icon:'image/icon2.png', count:0},
  {name:"Magasin de croquettes", price:200, cps:5, clickMultiplier:0, icon:'image/icon3.png', count:0},
  {name:"Supermarché de croquette", price:500, cps:10, clickMultiplier:0, icon:'image/icon4.png', count:0},
  {name:"Hypermarché de croquettes", price:1200, cps:25, clickMultiplier:0, icon:'image/icon5.png', count:0},
  {name:"Entrepôt de croquettes", price:3000, cps:50, clickMultiplier:0, icon:'image/icon6.png', count:0},
  {name:"Usine de croquettes", price:7000, cps:100, clickMultiplier:0, icon:'image/icon7.png', count:0},
  {name:"Dimension de croquettes", price:15000, cps:250, clickMultiplier:0, icon:'image/icon8.png', count:0},
  {name:"Univers de croquettes", price:50000, cps:500, clickMultiplier:0, icon:'image/icon9.png', count:0},
];

// Charger sauvegarde
if(localStorage.getItem('clickerData')){
  const data = JSON.parse(localStorage.getItem('clickerData'));
  score = data.score;
  clickValue = data.clickValue;
  items.forEach((item, i)=>{
    if(data.items[i]){
      item.count = data.items[i].count;
      item.price = data.items[i].price;
    }
  });
}

// Sauvegarde
function saveData(){
  const data = {
    score: score,
    clickValue: clickValue,
    items: items.map(i=>({count:i.count, price:i.price}))
  };
  localStorage.setItem('clickerData', JSON.stringify(data));
}

const storeDiv = document.getElementById('store');
items.forEach((item, i)=>{
  const div = document.createElement('div');
  div.className = 'store-item';
  div.innerHTML = `
    <div class="store-left">
      <button class="button-store" id="btn-${i}">${item.name} (${item.price})</button>
      <span class="count" id="count-${i}">x${item.count}</span>
    </div>
    <img src="${item.icon}" alt="${item.name}">
  `;
  storeDiv.appendChild(div);
  document.getElementById(`btn-${i}`).addEventListener('click', ()=>{
    if(score >= item.price){
      score -= item.price;
      item.count++;
      item.price = Math.floor(item.price * 1.2);
      if(item.clickMultiplier > 0) clickValue += item.clickMultiplier;
      saveData();
      flashButton(`btn-${i}`);
    }
    updateScore();
    updateStore();
  });
});

function flashButton(id){
  const btn = document.getElementById(id);
  btn.style.boxShadow = "0 0 10px yellow";
  setTimeout(()=>{ btn.style.boxShadow = ""; }, 300);
}

// Reset avec reset des prix
document.getElementById('reset-btn').addEventListener('click', ()=>{
  if(confirm("Réinitialiser le jeu ?")){
    score = 0;
    clickValue = 1;
    items.forEach((item, i) => {
      item.count = 0;
      item.price = basePrices[i];
    });
    localStorage.removeItem('clickerData');
    updateScore();
    updateStore();
    document.body.style.animation = "flashRed 0.5s";
    setTimeout(()=>{ document.body.style.animation = ""; }, 500);
  }
});

const scoreDiv = document.getElementById('score');
function updateScore(){
  let cps = items.reduce((a,b)=>a+b.cps*b.count,0);
  scoreDiv.textContent = `Click : ${Math.floor(score)} | CPS : ${cps}`;
}

function updateStore(){
  items.forEach((item, i)=>{
    document.getElementById(`btn-${i}`).textContent = `${item.name} (${item.price})`;
    document.getElementById(`count-${i}`).textContent = `x${item.count}`;
  });
}

const img = document.getElementById('image');
let canClick = true;
img.addEventListener('click', (e)=>{
  if(!canClick) return;
  score += clickValue;
  updateScore();
  saveData();
  createClickAnim(e);
  canClick = false;
  setTimeout(()=>{ canClick = true; }, 300);
});

function createClickAnim(e){
  const anim = document.createElement('div');
  anim.className = 'click-anim';
  anim.textContent = `+${clickValue}`;
  anim.style.left = (e.clientX - 20) + 'px';
  anim.style.top = (e.clientY - 20) + 'px';
  document.body.appendChild(anim);
  setTimeout(()=>{ anim.remove(); }, 800);
}

setInterval(()=>{
  let total = items.reduce((a,b)=>a+b.cps*b.count,0);
  score += total;
  updateScore();
  saveData();
},1000);

setInterval(saveData, 60000);

updateScore();
updateStore();
</script>
</body>
</html>
